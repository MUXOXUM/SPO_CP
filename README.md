# CRM для магазина музыкальных записей
Стек: Vue + Node.js + PostgreSQL  
Минимальный функционал:
1. Страничка покупателя с перечнем записей и возомжностью оформления заказа
2. Страничка менеджера для обработок заказов, просмотра статистики, заказов поставок, просмотра наличия вещей на складе


# Пример работы


# Инструкция по запуску проекта

Для работы требуется установленный Node.js.

### 1. Сервер (Backend)

```bash
cd backend
npm install
node server.js
```

### 2. Клиент (Frontend)

```bash
cd frontend
npm install
npm run dev
```


# Описание эндпоинтов бэкенда

## Authentication Endpoints (`/api/auth`)

| Метод | Эндпоинт                | Описание                                      |
|-------|-------------------------|-----------------------------------------------|
| POST  | `/api/auth/register`    | Регистрация нового пользователя               |
| POST  | `/api/auth/login`       | Вход в систему                                |
| GET   | `/api/auth/profile`     | Получение профиля пользователя                |

## Catalog Endpoints (`/api/catalog`)

| Метод | Эндпоинт                  | Описание                              |
|-------|---------------------------|---------------------------------------|
| GET   | `/api/catalog/albums`     | Получение списка альбомов             |
| GET   | `/api/catalog/albums/:id` | Получение деталей конкретного альбома |
| GET   | `/api/catalog/formats`    | Получение списка форматов             |

## Order Endpoints (`/api/orders`)

*Все эндпоинты требуют авторизации*

| Метод | Эндпоинт           | Описание                                  |
|-------|--------------------|-------------------------------------------|
| POST  | `/api/orders`      | Создание нового заказа                    |
| GET   | `/api/orders`      | Получение списка заказов пользователя     |
| GET   | `/api/orders/:id`  | Получение деталей конкретного заказа      |

## Manager Endpoints (`/api/manager`)

*Все эндпоинты требуют авторизации и роль менеджера*

### Сотрудники

| Метод | Эндпоинт                     | Описание                              |
|-------|------------------------------|---------------------------------------|
| GET   | `/api/manager/employees`      | Получение списка сотрудников          |
| POST  | `/api/manager/employees`      | Добавление нового сотрудника          |
| PUT   | `/api/manager/employees/:id`  | Обновление информации о сотруднике    |

### Поставки

| Метод | Эндпоинт                           | Описание                      |
|-------|------------------------------------|-------------------------------|
| POST  | `/api/manager/purchases`           | Создание новой поставки       |
| GET   | `/api/manager/purchases`           | Получение списка поставок     |
| PUT   | `/api/manager/purchases/:id/status`| Обновление статуса поставки   |

### Дашборд

| Метод | Эндпоинт                          | Описание                  |
|-------|-----------------------------------|---------------------------|
| GET   | `/api/manager/dashboard/stats`    | Общая статистика          |
| GET   | `/api/manager/dashboard/sales`    | Временная линия продаж    |
| GET   | `/api/manager/dashboard/top-products` | Топ продуктов        |

# Тестовые данные для базы данных (`spo_cp`)

## Жанры (`Genres`)

```sql
INSERT INTO "Genres" (genre_id, name, description) VALUES
(1, 'Рок', 'Жанр популярной музыки, возникший в 1950-х годах.'),
(2, 'Поп', 'Жанр с запоминающимися мелодиями и простыми текстами.'),
(3, 'Джаз', 'Жанр, возникший в афроамериканских сообществах в начале XX века.'),
(4, 'Классика', 'Широкий термин для музыки западной традиции.'),
(5, 'Хип-хоп', 'Жанр с ритмичной музыкой и речитативом.'),
(6, 'Кантри', 'Жанр, возникший на юге США в 1920-х годах.'),
(7, 'Электронная', 'Жанр, использующий электронные инструменты и технологии.'),
(8, 'Регги', 'Жанр, возникший на Ямайке в конце 1960-х годов.'),
(9, 'Блюз', 'Жанр афроамериканской музыки, выражающий грусть и тоску.'),
(10, 'Метал', 'Жанр с громкой и агрессивной музыкой.');
```

## Исполнители (`Artists`)

```sql
INSERT INTO "Artists" (artist_id, name, country, biography, genre_id) VALUES
(1, 'Группа Рок-Звук', 'Россия', 'Группа, основанная в 2010 году, играет классический рок с элементами блюза.', 1),
(2, 'Поп-Лидер', 'США', 'Известный исполнитель, который покорил мир своими поп-хитами.', 2),
(3, 'Джаз-Бенд', 'Франция', 'Французский коллектив, играющий традиционный и современный джаз.', 3),
(4, 'Классический Оркестр', 'Германия', 'Известный оркестр, исполняющий классическую музыку на крупнейших площадках мира.', 4),
(5, 'Микрорайон', 'Россия', 'Молодая группа, создающая оригинальные хип-хоп композиции.', 5),
(6, 'Кантри-Звезда', 'США', 'Исполнитель кантри-музыки с большим репертуаром.', 6),
(7, 'Электро-Бит', 'Швеция', 'Популярный диджей и продюсер электронной музыки.', 7),
(8, 'Регги-Бэнд', 'Ямайка', 'Группа, исполняющая традиционный регги с позитивным посылом.', 8),
(9, 'Блюзмен', 'США', 'Музыкант, вдохновленный традиционным блюзом и рок-н-роллом.', 9),
(10, 'Метал-Бойс', 'Германия', 'Группа, играющая тяжелый металл с агрессивными риффами и мощными вокалами.', 10);
```

## Альбомы (`Albums`)

```sql
INSERT INTO "Albums" (album_id, title, release_year, duration, label, artist_id, genre_id) VALUES
(1, 'Живой Рок', 2020, 45, 'Музыкальный лейбл №1', 1, 1),
(2, 'Мелодии Попа', 2019, 50, 'Top Hits', 2, 2),
(3, 'Джазовый Вечер', 2018, 60, 'Jazz Records', 3, 3),
(4, 'Классические Хиты', 2017, 70, 'Classic Sound', 4, 4),
(5, 'Улицы Хип-хопа', 2021, 40, 'Urban Beats', 5, 5),
(6, 'Звуки Кантри', 2016, 55, 'Country Music Ltd.', 6, 6),
(7, 'Электронный Мир', 2022, 48, 'Electro Records', 7, 7),
(8, 'Ямайский Регги', 2020, 42, 'Reggae Vibes', 8, 8),
(9, 'Блюзовые Ночи', 2015, 52, 'Blues Sound', 9, 9),
(10, 'Металлический Шторм', 2019, 58, 'Metal Wave', 10, 10);
```

## Товары (`Products`)

```sql
INSERT INTO "Products" (product_id, format, price, stock_quantity, barcode, condition, album_id) VALUES
(1, 'CD', 499.99, 15, '1234567890123', 'Новый', 1),
(2, 'Винил', 1299.50, 10, '2345678901234', 'Новый', 2),
(3, 'Цифровой', 299.99, 100, '3456789012345', 'Новый', 3),
(4, 'Кассета', 199.00, 5, '4567890123456', 'Б/У', 4),
(5, 'CD', 550.00, 20, '5678901234567', 'Новый', 5),
(6, 'Винил', 1399.00, 8, '6789012345678', 'Новый', 6),
(7, 'Цифровой', 249.99, 200, '7890123456789', 'Новый', 7),
(8, 'CD', 599.99, 12, '8901234567890', 'Б/У', 8),
(9, 'Винил', 1599.00, 7, '9012345678901', 'Новый', 9),
(10, 'Цифровой', 199.99, 300, '0123456789012', 'Новый', 10);
```




////////////////////////////////////////////////////////////////////////////////////////////////////////

Задание № 23 (Магазин музыкальных записей)

Разработать информационную систему для магазина аудио- и видеозаписей. Магазин музыкальных и видеозаписей ведет для поку- пателей каталог имеющихся в продаже записей с указанием их роз- ничных цен, жанра, разновидностей жанра, вида носителя записи (диск, флешка), имени (названия) исполнителя или автора, названия произведения или записи, года выпуска, производителя и т. д. Кроме того, магазин ведет внутренний учет текущих оптовых цен на записи, количества экземпляров, проданных за отдельные периоды в про- шлом, числа еще не распроданных (имеющихся в наличии) экземпля- ров записей. В реальной ситуации также требуется вести учет заказов на отсутствующие записи, подсчет прибылей/убытков за прошедшие периоды и т. д.
Запись	Каталог	Магазин
ИД	ИД	ИД
Название	Запись	Список записей
Жанр	Цена (розница)	Цена (опт)
Исполнитель	Носитель	Количество продаж
Год выпуска		Наличие
Фирма		
Вид носителя		

Должны быть созданы обобщенные списки:
•	Сведения о записях.
•	Сведения о произведениях.
•	Сведения о магазинах.
Должны быть реализованы следующие запросы:
•	Получение перечня всех записей заданного жанра.
•	Получение списка самых продаваемых записей.
•	Исполнитель самых продаваемых произведений.
•	Перечень отсутствующих в магазине записей.
•	Стоимость всех проданных записей.
•	Запись с максимальной разницей между розничной и оптовой ценой.
Должна быть предусмотрена возможность добавления и удале- ния песен в заданную группу.


